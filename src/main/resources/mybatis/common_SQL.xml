<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="common">

	<select id="selLoginMember" resultType="map" parameterType="map">
		SELECT * FROM PUBLIC.D_MEM_INFO WHERE MEM_ID = #{memId}
	</select>
	
	<select id="selConnectLog" resultType="map">
		SELECT * FROM WEB.D_WEB_LOG
	</select>
	
	<select id="insConnectLog" parameterType="map" resultType="String">
		INSERT INTO 
			WEB.D_WEB_LOG(ip, mem_id, login_time, log_type)
		VALUES 
			(#{ip}, #{memId}, #{loginTime}, #{logType})
	</select>
	
	<select id="selConnectNowLog" resultType="int">
		SELECT LOG_NO FROM WEB.D_WEB_LOG
		ORDER BY LOG_NO DESC LIMIT 1
	</select>
	
	<update id="updLogoutLog" parameterType="map">
		UPDATE 
			WEB.D_WEB_LOG
		SET 
			log_type = #{logType},
			logout_time = #{logoutTime}
		WHERE 
			LOG_NO = #{logNo}
	</update>
</mapper>